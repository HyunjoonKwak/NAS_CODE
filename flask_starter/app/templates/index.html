{% extends "base.html" %}

{% block content %}
<!-- Main Content Grid -->
<div class="main-content">

  <!-- Latest Draw Results -->
  {% if latest %}
  <section class="card highlight-card">
    <div class="card-header">
      <h2>🎯 {{ latest.round }}회 최신 추첨결과</h2>
      <span class="draw-date">{{ latest.draw_date if latest.draw_date else '' }}</span>
    </div>
    <div class="draw-result">
      <div class="numbers">
        {% for num in latest.numbers_list() %}
          <span class="number-ball">{{ num }}</span>
        {% endfor %}
      </div>
      <div class="bonus-section">
        <span class="plus">+</span>
        <span class="bonus-ball">{{ latest.bonus }}</span>
        <span class="bonus-label">보너스</span>
      </div>
    </div>
  </section>
  {% else %}
  <section class="card error-card">
    <h2>⚠️ 데이터 없음</h2>
    <p>추첨 결과 데이터가 없습니다. 정보조회 페이지에서 데이터를 업데이트해주세요.</p>
  </section>
  {% endif %}



  <!-- Latest Winning Shops -->
  {% if latest and shops_rank1 %}
  <section class="card">
    <div class="card-header">
      <h2>🏪 {{ latest.round }}회 1등 당첨점 ({{ shops_rank1|length }}개)</h2>
    </div>

    {% if shops_rank1|length > 0 %}
    <div class="table-container">
      <table>
        <thead>
          <tr><th>순번</th><th>상호</th><th>구분</th><th>주소</th></tr>
        </thead>
        <tbody>
          {% for s in shops_rank1 %}
          <tr>
            <td>{{ s.sequence or '' }}</td>
            <td><strong>{{ s.name }}</strong></td>
            <td><span class="badge-method">{{ s.method or '구분없음' }}</span></td>
            <td>{{ s.address }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    {% else %}
    <div class="info-box">
      <p>아직 1등 당첨점 정보가 없습니다.</p>
    </div>
    {% endif %}

    <div style="margin-top: 1rem; text-align: center;">
      <p><small>더 자세한 당첨점 정보는 <a href="{{ url_for('main.info_page') }}">정보조회 페이지</a>에서 확인하세요.</small></p>
    </div>
  </section>
  {% endif %}

</div> <!-- End main-content -->

{% endblock %}
