<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta name="description" content="Î°úÎòê Î≤àÌò∏ Î∂ÑÏÑù Î∞è Ï∂îÏ≤ú ÏãúÏä§ÌÖú"/>
    <meta name="theme-color" content="#6366f1"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="default"/>
    <meta name="apple-mobile-web-app-title" content="Î°úÎòêÎ∂ÑÏÑù"/>
    <meta name="msapplication-TileColor" content="#6366f1"/>
    <meta name="msapplication-config" content="/static/browserconfig.xml"/>
    <title>üé≤ Î°úÎòê Î≤àÌò∏ Î∂ÑÏÑù</title>
    <link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}">

    <!-- Bootstrap CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Ìó§Îçî -->
        <header class="app-header">
            <h1><i class="fas fa-dice"></i> Î°úÎòê Î≤àÌò∏ Î∂ÑÏÑù</h1>
            <p>AI Í∏∞Î∞ò Î°úÎòê Î≤àÌò∏ Î∂ÑÏÑù Î∞è Ï∂îÏ≤ú ÏãúÏä§ÌÖú</p>
        </header>

        <!-- ÌÜµÍ≥Ñ Ïπ¥Îìú -->
        <div class="row mb-4">
            <div class="col-md-3 col-sm-6 mb-3">
                <div class="stats-card">
                    <div class="stats-number">{{ total_draws }}</div>
                    <div class="stats-label">Ï¥ù ÌöåÏ∞®</div>
                </div>
            </div>
            <div class="col-md-3 col-sm-6 mb-3">
                <div class="stats-card">
                    <div class="stats-number">{{ latest_draw }}</div>
                    <div class="stats-label">ÏµúÏã† ÌöåÏ∞®</div>
                </div>
            </div>
            <div class="col-md-3 col-sm-6 mb-3">
                <div class="stats-card">
                    <div class="stats-number">{{ frequent_numbers|length if frequent_numbers else 0 }}</div>
                    <div class="stats-label">ÎπàÏ∂ú Î≤àÌò∏</div>
                </div>
            </div>
            <div class="col-md-3 col-sm-6 mb-3">
                <div class="stats-card">
                    <div class="stats-number">{{ recommendations|length if recommendations else 0 }}</div>
                    <div class="stats-label">Ï∂îÏ≤ú Î≤àÌò∏</div>
                </div>
            </div>
        </div>

        <!-- Î©îÏù∏ ÏΩòÌÖêÏ∏† -->
        <div class="row g-4">
            <!-- ÏµúÏã† ÎãπÏ≤®Î≤àÌò∏ -->
            <div class="col-lg-6">
                <div class="card">
                    <div class="card-header">
                        <i class="fas fa-trophy me-2"></i>ÏµúÏã† ÎãπÏ≤®Î≤àÌò∏
                    </div>
                    <div class="card-body">
                        {% if recent_results %}
                            {% for r in recent_results %}
                                <div class="draw-result">
                                    <div class="draw-info">
                                        <div class="draw-number">{{ r['draw_no'] }}ÌöåÏ∞®</div>
                                        <div class="draw-date">{{ r['draw_date'] }}</div>
                                    </div>
                                    <div class="d-flex align-items-center flex-wrap">
                                        <span class="lotto-ball">{{ r['num1'] }}</span>
                                        <span class="lotto-ball">{{ r['num2'] }}</span>
                                        <span class="lotto-ball">{{ r['num3'] }}</span>
                                        <span class="lotto-ball">{{ r['num4'] }}</span>
                                        <span class="lotto-ball">{{ r['num5'] }}</span>
                                        <span class="lotto-ball">{{ r['num6'] }}</span>
                                        <span class="mx-2 text-muted">+</span>
                                        <span class="lotto-ball bonus">{{ r['bonus_num'] }}</span>
                                    </div>
                                </div>
                            {% endfor %}
                        {% else %}
                            <div class="text-center text-muted py-4">
                                <i class="fas fa-inbox fa-3x mb-3"></i>
                                <p>Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÏäµÎãàÎã§.</p>
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>

            <!-- ÎπàÏ∂ú/ÎØ∏Ï∂úÌòÑ Î≤àÌò∏ -->
            <div class="col-lg-6">
                <!-- ÎπàÏ∂ú Î≤àÌò∏ -->
                <div class="card mb-4">
                    <div class="card-header">
                        <i class="fas fa-fire me-2"></i>ÎπàÏ∂ú TOP 10
                    </div>
                    <div class="card-body">
                        {% if frequent_numbers %}
                            <div class="d-flex flex-wrap gap-2">
                                {% for n in frequent_numbers %}
                                    <div class="lotto-ball" title="Ï∂úÌòÑ {{ n['frequency'] }}Ìöå">
                                        {{ n['number'] }}
                                    </div>
                                {% endfor %}
                            </div>
                        {% else %}
                            <div class="text-center text-muted py-3">
                                <i class="fas fa-chart-bar fa-2x mb-2"></i>
                                <p>Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÏäµÎãàÎã§.</p>
                            </div>
                        {% endif %}
                    </div>
                </div>

                <!-- ÎØ∏Ï∂úÌòÑ Î≤àÌò∏ -->
                <div class="card">
                    <div class="card-header">
                        <i class="fas fa-clock me-2"></i>ÎØ∏Ï∂úÌòÑ TOP 10
                    </div>
                    <div class="card-body">
                        {% if overdue_numbers %}
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>ÏàúÏúÑ</th>
                                            <th>Î≤àÌò∏</th>
                                            <th>ÎØ∏Ï∂úÌòÑ(Ï£º)</th>
                                            <th>ÎßàÏßÄÎßâ ÌöåÏ∞®</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for n in overdue_numbers %}
                                            <tr>
                                                <td><span class="badge bg-secondary">{{ loop.index }}</span></td>
                                                <td><span class="lotto-ball">{{ n['number'] }}</span></td>
                                                <td><strong>{{ n['not_drawn_weeks'] }}</strong></td>
                                                <td><small class="text-muted">{{ n['last_drawn'] }}</small></td>
                                            </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        {% else %}
                            <div class="text-center text-muted py-3">
                                <i class="fas fa-hourglass-half fa-2x mb-2"></i>
                                <p>Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÏäµÎãàÎã§.</p>
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>

        <!-- Ï∂îÏ≤ú Î≤àÌò∏ -->
        <div class="card mt-4">
            <div class="card-header d-flex justify-content-between align-items-center">
                <span><i class="fas fa-magic me-2"></i>Ï∂îÏ≤ú Î≤àÌò∏</span>
                <div class="d-flex gap-2">
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="auto-refresh-toggle">
                        <label class="form-check-label text-white" for="auto-refresh-toggle">
                            <small>ÏûêÎèô ÏÉàÎ°úÍ≥†Ïπ®</small>
                        </label>
                    </div>
                    <button class="btn btn-primary btn-sm" id="generate-recommendations">
                        <i class="fas fa-plus me-1"></i>ÏÉà Ï∂îÏ≤ú ÏÉùÏÑ±
                    </button>
                </div>
            </div>
            <div class="card-body">
                {% if recommendations %}
                    {% for r in recommendations %}
                        {% set nums = r['numbers'].split(',') %}
                        <div class="recommendation-item">
                            <div class="d-flex align-items-center mb-2">
                                <span class="algorithm-badge">{{ r['algorithm'] }}</span>
                                <span class="confidence-score">{{ r['confidence_score'] }}%</span>
                            </div>
                            <div class="d-flex align-items-center flex-wrap mb-2">
                                {% for x in nums %}
                                    <span class="lotto-ball">{{ x|int }}</span>
                                {% endfor %}
                            </div>
                            <div class="recommendation-meta">
                                <div class="mb-1"><i class="fas fa-lightbulb me-1"></i>{{ r['reason'] }}</div>
                                <div><i class="fas fa-calendar me-1"></i>{{ r['created_at'] }}</div>
                            </div>
                        </div>
                    {% endfor %}
                {% else %}
                    <div class="text-center text-muted py-4">
                        <i class="fas fa-magic fa-3x mb-3"></i>
                        <p>Ï∂îÏ≤ú Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÏäµÎãàÎã§.</p>
                        <button class="btn btn-primary" id="generate-recommendations">
                            <i class="fas fa-plus me-1"></i>Ï≤´ Î≤àÏß∏ Ï∂îÏ≤ú ÏÉùÏÑ±
                        </button>
                    </div>
                {% endif %}
            </div>
        </div>

        <!-- Ìë∏ÌÑ∞ -->
        <footer class="text-center text-white mt-5 mb-3">
            <p class="mb-0">
                <small>
                    <i class="fas fa-code me-1"></i>
                    Î°úÎòê Î≤àÌò∏ Î∂ÑÏÑù ÏãúÏä§ÌÖú v2.0
                    <span class="mx-2">|</span>
                    <i class="fas fa-chart-line me-1"></i>
                    AI Í∏∞Î∞ò Î∂ÑÏÑù
                </small>
            </p>
        </footer>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
